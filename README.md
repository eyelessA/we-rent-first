# Тестовое задание (защита от повторного запуска)

**Описание задачи:**  
Написать любой скрипт, который будет выполняться 5 секунд.
Вшить в этот скрипт защиту от повторного запуска, если он еще не отработал.
Использовать Redis. Не использовать фреймворки, написать на чистом php.

### Реализация

#### main.php:

Выполняю скрипт ``docker exec -t we_rent_first_php php main.php``.  
В нем устанавливаю максимальное время выполнения скрипта.
Устанавливаю TTL с помощью параметра [‘ex’] для ключа, чтобы он удалился спустя 5 секунд и можно было запустить программу в случае ошибки.

##### Проблемные кейсы:

1. Почему стоит использовать TTL:
- Без использования TTL, т.е удаление ключа через $redis->del('lock') в случае возникновения ошибки ключ может остаться навсегда и программу уже будет не возможно запустить.
 
2. Почему стоит использовать max_execution_time:
-  Использования max_execution_time, помогает избежать длительного выполнения в случае возникновения ошибки. Если время выполнение превышает TTL, то можно будет запустить второй экземпляр программы в момент работы первого.

### Комментарии и оценка задачи:

Сложность оцениваю как 1-2.  
Временные затраты около часа.